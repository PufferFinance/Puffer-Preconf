sequenceDiagram
    participant O as Operator
    participant G as Gateway
    participant BN as BeaconNode
    participant UAM as UniFiAVSManager
    participant CB as Commit-Boost
    participant RM as RewardsManager

    O->>G: Set delegate key
    G->>BN: Query lookahead window
    BN-->>G: Return upcoming proposer indices
    loop For each validator
        G->>UAM: getValidator(validatorIndex)
        UAM-->>G: Validator registration status
    end
    Note over G: Start receiving preconf transactions
    Note over G: Sign preconfs with delegate key
    CB->>G: Request final L1
    G-->>CB: Provide final L1
    CB->>O: Propose block
    O->>RM: Send portion of block rewards
    O->>G: Send portion of block rewards
